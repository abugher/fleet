---
- hosts:                meliora
  gather_facts:         False
  remote_user:          ansible
  become:               yes
  become_method:        sudo
  tasks:

  - name:               'install scripts on meliora:  nethack'
    copy:
      owner:            'root'
      group:            'root'
      mode:             '0755'
      src:              '~/code/fleet/bin/nethack'
      dest:             '/usr/local/bin/nethack'
  - name:               'install scripts on meliora:  pdfprintd'
    copy:
      owner:            'root'
      group:            'root'
      mode:             '0755'
      src:              '~/code/fleet/bin/pdfprintd'
      dest:             '/usr/local/bin/pdfprintd'
    register:           meliora_pdfprintd
  - name:               'install scripts on meliora:  pdfprint'
    copy:
      owner:            'root'
      group:            'root'
      mode:             '0755'
      src:              '~/code/fleet/bin/pdfprint'
      dest:             '/etc/init.d/pdfprint'
    register:           meliora_pdfprint
  - name:               'install scripts on meliora:  enable pdfprint service'
    service:
      name:             'pdfprint'
      enabled:          'yes'
    register:           meliora_pdfprint_service
  - name:               'install scripts on meliora:  restart pdfprint service'
    service:
      name:             'pdfprint'
      state:            'restarted'
    when:               meliora_pdfprintd.changed or meliora_pdfprint.changed or meliora_pdfprint_service.changed

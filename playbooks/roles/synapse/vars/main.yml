---
#install_packages:
# What are these for?
#  - 'libffi5-dev'
#  - 'libxml2-dev'
install_files:
  - owner:              'root'
    group:              'root'
    mode:               '0600'
    src:                '~/code/sensitive/conf/ssh_keys/root@synapse.id_rsa'
    dest:               '/root/.ssh/id_rsa'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '~/code/fleet/conf/ssh_keys/root@synapse.id_rsa.pub'
    dest:               '/root/.ssh/id_rsa.pub'
  - owner:              'pi'
    group:              'pi'
    mode:               '0600'
    src:                '~/code/sensitive/conf/ssh_keys/pi@synapse.id_rsa'
    dest:               '~pi/.ssh/id_rsa'
  - owner:              'pi'
    group:              'pi'
    mode:               '0644'
    src:                '~/code/fleet/conf/ssh_keys/pi@synapse.id_rsa.pub'
    dest:               '~pi/.ssh/id_rsa.pub'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '~/code/fleet/conf/dphys-swapfile'
    dest:               '/etc/dphys-swapfile'
  # This update DNS business should have its own roles.
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '~/code/fleet/cron.d/synapse/update_dns'
    dest:               '/etc/cron.d/update_dns'
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    src:                '~/code/fleet/bin/update_dns_phase1'
    dest:               '/usr/local/bin/update_dns_phase1'
keys:
  - user:               'escrow'
    keyfile:            '~/code/fleet/conf/ssh_keys/root@neuron.id_rsa.pub'
  - user:               'pi'
    keyfile:            '~/code/fleet/conf/ssh_keys/aaron-phone@aaron-phone.id_rsa.pub'
restart_services:
  - 'dphys-swapfile'
dot_users:
  - 'pi'

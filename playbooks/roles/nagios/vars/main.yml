---
install_packages:
  - 'nagios3'
sync_dirs:
  - src:                '~/code/fleet/conf/nagios/synapse/nagios3/'
    dest:               '/etc/nagios3/'
    delete:             'yes'
install_files:
  - owner:              'nagios'
    group:              'nagios'
    mode:               '0600'
    src:                '~/code/sensitive/conf/ssh_keys/nagios@synapse.id_rsa'
    dest:               '~nagios/.ssh/id_rsa'
  - owner:              'nagios'
    group:              'nagios'
    mode:               '0644'
    src:                '~/code/fleet/conf/ssh_keys/nagios@synapse.id_rsa.pub'
    dest:               '~nagios/.ssh/id_rsa.pub'
  - owner:              'nagios'
    group:              'nagios'
    mode:               '0600'
    src:                '~/code/fleet/conf/ssh_keys/nagios@synapse.known_hosts'
    dest:               '~nagios/.ssh/known_hosts'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '~/code/fleet/conf/nagios/synapse/logos/'
    dest:               '/usr/share/nagios3/htdocs/images/logos/custom/'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '~/code/sensitive/conf/nagios/synapse/nagios3/htpasswd.users'
    dest:               '/etc/nagios3/htpasswd.users'
enable_services:
  - 'nagios3'
start_services:
  - 'nagios3'
restart_services:
  - 'nagios3'

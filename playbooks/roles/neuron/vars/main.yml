---
users:
  - 'rachel-phone'
  - 'aaron-phone'
groups:
  - 'rachel-phone'
  - 'aaron-phone'
create_files:
  - path:               '/usr/share/nginx/www/private'
    owner:              'root'
    group:              'www-data'
    mode:               '0750'
    state:              'directory'
  - path:               '/usr/share/nginx/www/plaintext'
    owner:              'root'
    group:              'root'
    mode:               '0755'
    state:              'directory'
install_files:
  - owner:              'root'
    group:              'www-data'
    mode:               '0640'
    src:                '~/code/sensitive/conf/nginx/neuron/htpasswd'
    dest:               '/etc/nginx/htpasswd'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '~/code/fleet/conf/nginx/neuron/preseed.cfg'
    dest:               '/usr/share/nginx/www/plaintext/preseed.cfg'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '~/code/fleet/conf/nginx/neuron/index.html'
    dest:               '/usr/share/nginx/www/index.html'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '~/code/fleet/conf/fstab/neuron/fstab'
    dest:               '/etc/fstab'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '~/code/fleet/cron.d/neuron/chown_pictures'
    dest:               '/etc/cron.d/chown_pictures'
restart_services:
  - 'nginx'
homedirs:
  - 'root'
  - 'pi'
symlinks:
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                '/storage/aaron-phone/live/legacy/DCIM/Camera'
    dest:               '/usr/share/nginx/www/private/pictures'
authorized_keys:
  - user:               'rachel-phone'
    keyfile:            '~/code/fleet/conf/ssh_keys/rsync_backup@rachel-phone.dss_key.pub'
  - user:               'aaron-phone'
    keyfile:            '~/code/fleet/conf/ssh_keys/aaron-phone@aaron-phone.id_rsa.pub'
  - user:               'aaron-phone'
    keyfile:            '~/code/fleet/conf/ssh_keys/rsync_backup@aaron-phone.dss_key.pub'


---
system_groups:
  - 'escrow'
system_users:
  - 'escrow'
install_packages:
  - 'nagios-plugins-basic'      # monitor /storage
  - 'cryptsetup'
create_files:
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    state:              'directory'
    path:               '/storage'
install_files:
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    src:                "{{ role_path }}/files/bin/storage"
    dest:               '/usr/local/bin/storage'
  - owner:              'root'
    group:              'root'
    mode:               '0755'
    src:                "{{ role_path }}/files/bin/tend_storage"
    dest:               '/usr/local/bin/tend_storage'
  - owner:              'root'
    group:              'root'
    mode:               '0644'
    src:                "{{ role_path }}/../storage/files/cron.d/tend_storage"
    dest:               '/etc/cron.d/tend_storage'
symlinks:
  - owner:              'root'
    group:              'root'
    src:                '/usr/local/bin/tend_storage'
    dest:               '/usr/local/bin/s'
homedirs:
  - 'root'              # .known_hosts
authorized_keys:
  # See long-winded comment about here in ../../escrow/vars/main.yml.
  - user:               'escrow'
    keyfile:            "{{ role_path }}/../neuron/files/ssh_keys/root.id_rsa.pub"
  - user:               'escrow'
    keyfile:            "{{ role_path }}/../synapse/files/ssh_keys/root.id_rsa.pub"
  - user:               'escrow'
    keyfile:            "{{ role_path }}/../files/files/ssh_keys/root.id_rsa.pub"
known_hosts:
  - user:               'root'
    name:               'neuron'
    keyfile:            "{{ role_path }}/../neuron/files/ssh_keys/known_host"
  - user:               'root'
    name:               'synapse'
    keyfile:            "{{ role_path }}/../synapse/files/ssh_keys/known_host"
  - user:               'root'
    name:               'files'
    keyfile:            "{{ role_path }}/../files/files/ssh_keys/known_host"
